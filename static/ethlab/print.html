<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ethereum Lab</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="prerequisites.html"><strong aria-hidden="true">1.</strong> Prerequisites</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="metamask.html"><strong aria-hidden="true">1.1.</strong> Install Metamask</a></li><li class="chapter-item expanded "><a href="testnet-ether.html"><strong aria-hidden="true">1.2.</strong> Get Testnet Ether</a></li><li class="chapter-item expanded "><a href="alchemy-api-key.html"><strong aria-hidden="true">1.3.</strong> Get Node Provider API Key</a></li></ol></li><li class="chapter-item expanded "><a href="remix/remix.html"><strong aria-hidden="true">2.</strong> Remix Workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="remix/remix-compile.html"><strong aria-hidden="true">2.1.</strong> Compiling a Contract</a></li><li class="chapter-item expanded "><a href="remix/remix-deploy.html"><strong aria-hidden="true">2.2.</strong> Deploying a Contract</a></li><li class="chapter-item expanded "><a href="remix/remix-interact.html"><strong aria-hidden="true">2.3.</strong> Interacting with the Contract</a></li></ol></li><li class="chapter-item expanded "><a href="hardhat/hardhat.html"><strong aria-hidden="true">3.</strong> Hardhat Workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="hardhat/hardhat-project-setup.html"><strong aria-hidden="true">3.1.</strong> Setting up a Hardhat Project</a></li><li class="chapter-item expanded "><a href="hardhat/hardhat-compile.html"><strong aria-hidden="true">3.2.</strong> Compiling a Contract</a></li><li class="chapter-item expanded "><a href="hardhat/hardhat-deploy.html"><strong aria-hidden="true">3.3.</strong> Deploying a Contract</a></li><li class="chapter-item expanded "><a href="hardhat/hardhat-interact.html"><strong aria-hidden="true">3.4.</strong> Interacting with the Contract</a></li></ol></li><li class="chapter-item expanded "><a href="erc20/erc20.html"><strong aria-hidden="true">4.</strong> Launch your Own ERC-20 Token </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="erc20/erc20-project-setup.html"><strong aria-hidden="true">4.1.</strong> Setting up the ERC-20 Project</a></li><li class="chapter-item expanded "><a href="erc20/erc20-deploy.html"><strong aria-hidden="true">4.2.</strong> Deploying the Contract</a></li><li class="chapter-item expanded "><a href="erc20/erc20-metamask.html"><strong aria-hidden="true">4.3.</strong> Transfer Tokens using Metamask</a></li></ol></li><li class="chapter-item expanded "><a href="erc721/erc721.html"><strong aria-hidden="true">5.</strong> Launch your Own NFT</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="erc721/erc721-project-setup.html"><strong aria-hidden="true">5.1.</strong> Setting up the ERC-721 Project</a></li><li class="chapter-item expanded "><a href="erc721/erc721-deploy.html"><strong aria-hidden="true">5.2.</strong> Deploying the Contract</a></li><li class="chapter-item expanded "><a href="erc721/erc721-mint.html"><strong aria-hidden="true">5.3.</strong> Minting an NFT</a></li><li class="chapter-item expanded "><a href="erc721/erc721-opensea.html"><strong aria-hidden="true">5.4.</strong> Viewing the NFTs on OpenSea</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ethereum Lab</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>This guide is an introduction to Ethereum smart contract development. It was created by <a href="https://www.ee.iitb.ac.in/~sarva">Saravanan Vijayakumaran</a> for the participants of the <a href="https://trustlab.iitb.ac.in/event/winter-school-2022">2022 ACM Winter School on Digital Trust</a> organized by <a href="https://trustlab.iitb.ac.in/">IITB Trust Lab</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h1>
<h2 id="ethereum-testnets"><a class="header" href="#ethereum-testnets">Ethereum Testnets</a></h2>
<p>Ethereum smart contracts are programs that are installed on the Ethereum blockchain. Installing a smart contract is also called <strong>deployment</strong>. Deploying smart contracts on Ethereum costs ether. The amount of ether required depends on the size of the smart contract.</p>
<p>Using real ether for learning smart contract development is not feasible. Fortunately, the Ethereum ecosystem operates <strong>testnets</strong>. These are versions of the Ethereum blockchain that are used for testing purposes. The main Ethereum blockchain is called <strong>mainnet</strong>. Unlike mainnet ether, testnet ether has no value. It is available for free from websites called <strong>faucets</strong>.</p>
<p>In this guide, we will be using the Goerli testnet (<a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/</a>) for Ethereum smart contract development. The domain name in the previous URL corresponds to Etherscan, a <strong>blockchain explorer</strong> which allows users to explore blockchain data in a browser. The blocks on Ethereum mainnet can be explored at <a href="https://etherscan.io/">https://etherscan.io/</a>.</p>
<h2 id="node-providers"><a class="header" href="#node-providers">Node Providers</a></h2>
<p>To deploy contracts to Ethereum, we need access to an Ethereum node. The node software continually downloads blocks and tracks the tip of the Ethereum blockchain. While it is possible to run an Ethereum node on our own computers, it will consume bandwidth, disk space, and CPU cycles.</p>
<p>It is more convenient to connect to a remote node operated by a node provider like Alchemy, Infura, or QuickNode. These are Infrastructure-as-a-Service (IaaS) companies that offer access to Ethereum nodes for a fee. All of them offer a <strong>free tier</strong> account that is sufficient for learning purposes.</p>
<p>See this article for more information about node providers: <a href="https://www.alchemy.com//blog/what-is-a-node-provider">Alchemy Blog: What is a Blockchain Node Provider</a></p>
<h2 id="prerequisites-for-smart-contract-development"><a class="header" href="#prerequisites-for-smart-contract-development">Prerequisites for Smart Contract Development</a></h2>
<p>Before beginning smart contract development, you need to complete the following steps:</p>
<ol>
<li>Install an Ethereum wallet and create an address to store testnet ether</li>
<li>Request testnet ether from a faucet into your address</li>
<li>Create an account with a node provider and generate an API key</li>
</ol>
<p>The details of how to complete these steps are described in the next sections. Keep reading!</p>
<blockquote>
<p><strong>Note:</strong> In this guide, we will be using two different workflows for smart contract development. One will use the <a href="https://remix.ethereum.org/">Remix</a> online IDE and the other will use <a href="https://hardhat.org/">Hardhat</a>.</p>
<p>The Remix workflow does not require a node provider API key (step 3 in the above list can be skipped). Remix will use the node provider of the Metamask wallet (which is installed as a browser plugin). The Hardhat workflow does require the API key.</p>
<p>While the Remix workflow is easier to setup, the Hardhat workflow is more convenient for testing and deploying smart contracts.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="install-metamask"><a class="header" href="#install-metamask">Install Metamask</a></h1>
<p>Metamask is an Ethereum wallet that can be installed as a browswer plugin. Go to <a href="https://metamask.io/download/">https://metamask.io/download/</a> and install it for your browser.</p>
<ol>
<li>
<p>Once you install the Metamask extension, you should see an orange fox icon in your browser's extension list. Click on it to get started with setting up your wallet.</p>
</li>
<li>
<p>You should eventually arrive at the following screen</p>
<p><img src="./images/metamask-create-wallet.png" alt="Metamask create wallet screen" /></p>
</li>
<li>
<p>Click on &quot;Create a wallet&quot; and set a password.</p>
</li>
<li>
<p>The Secret Recovery Phrase (SRP) is the seed randomness from which all your private keys will be created. Metamask will show you the SRP for your new wallet.</p>
<ul>
<li>Make sure you save your SRP by writing it down or downloading it.</li>
<li>If you lose it, you will lose access to all the Ethereum accounts you create in Metamask.</li>
</ul>
</li>
<li>
<p>Metamask will show you the words in your SRP and ask you to choose them in the right order. This is to confirm that you have stored the SRP.</p>
</li>
<li>
<p>Once your SRP is confirmed, Metamask will show you the wallet screen with a new created Ethereum account. This account will have no founds. We will fund it in the next section.</p>
</li>
<li>
<p>You can copy your Metamask address by following the step described in this <a href="https://metamask.zendesk.com/hc/en-us/articles/360015289512">page</a>.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="get-testnet-ether"><a class="header" href="#get-testnet-ether">Get Testnet Ether</a></h1>
<p>For the lab exercises described in this guide, you need to have testnet ether in your wallet. You will get testnet ether from faucet websites. To view your testnet ether balances, you need to add a testnet configuration to Metamask.</p>
<h2 id="configuring-goerli-testnet-in-metamask"><a class="header" href="#configuring-goerli-testnet-in-metamask">Configuring Goerli Testnet in Metamask</a></h2>
<p>By default, the Metamask wallet displays account balances on Ethereum mainnet. This is indicated at the top of the Metamask interface.</p>
<p align="center">
  <img src="./images/metamask-mainnet.png" alt="Metamask Mainnet"/>
</p>
<p>You will be configuring Metamask to interact with the <strong>Goerli tesnet</strong>. Do the following steps:</p>
<ol>
<li>
<p>Open Metamask and click on the dropdown labelled <strong>Ethereum mainnet</strong>. Click the <strong>Show/hide test networks</strong> link.</p>
<p align="center">
     <img src="./images/metamask-show-hide-test-networks.png" alt="Metamask show/hide test networks"/>
 </p>
</li>
<li>
<p>Set the <strong>Show test networks</strong> button to <strong>ON</strong>.</p>
<p align="center">
     <img src="./images/metamask-show-test-network-button.png" alt="Metamask show test networks button"/>
 </p>
</li>
<li>
<p>The network dropdown menu should now show the <strong>Goerli test network</strong></p>
<p align="center">
     <img src="./images/metamask-network-dropdown.png" alt="Metamask networks dropdown"/>
 </p>
</li>
<li>
<p>Choose the <strong>Goerli test network</strong> from the dropdown. Metamask should now denominate your balance in <strong>GoerliETH</strong>.</p>
<p align="center">
     <img src="./images/metamask-goerlieth.png" alt="Metamask Goerli ETH"/>
 </p>
</li>
</ol>
<h2 id="requesting-goerli-tesnet-ether-from-faucets"><a class="header" href="#requesting-goerli-tesnet-ether-from-faucets">Requesting Goerli Tesnet Ether From Faucets</a></h2>
<p>Faucets are websites that send small amounts of testnet ether on request. They are called faucets because they drip ether. The faucet operators themselves acquire the testnet ether by participating in the testnet consensus protocol.</p>
<ol>
<li>
<p><strong>Click on the account name in Metmask to copy the address to your clipboard.</strong>. To request testnet ether, you have to paste your account address in the faucet website.</p>
<p align="center">
    <img src="./images/metamask-copy-address.png" alt="Metamask Copy Account Address"/>
</p>
</li>
<li>
<p>To prevent bots or malicious users from draining all the testnet ether available, faucets have mechanisms for rate-limiting requests. Here are some faucets along with their rate-limiting mechanisms. Go to one of them.</p>
<ul>
<li>Paradigm Faucet: <a href="https://faucet.paradigm.xyz/">https://faucet.paradigm.xyz/</a>
<ul>
<li>Requires a Twitter account that must have at least 1 Tweet, 50 followers, and be older than 1 month. You need to authorize this faucet to read your Twitter profile, to check the previous conditions hold.</li>
<li>Drips 0.1 ETH per user every 24 hours.</li>
</ul>
</li>
<li>Alchemy Faucet: <a href="https://goerlifaucet.com/">https://goerlifaucet.com/</a>
<ul>
<li>Requires a free <a href="https://www.alchemy.com/">Alchemy</a> account. The faucet will check that you are logged in.</li>
<li>Drips 0.2 ETH per user every 24 hours.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Paste the account address into the textbox of the faucet and request the testnet ether.</strong> The picture below shows the Alchemy faucet interface.</p>
<p align="center">
     <img src="./images/goerli-faucet.png" alt="Alchemy Goerli Faucet"/>
 </p>
</li>
<li>
<p>If the faucet's ether transfer succeeds, you should see a non-zero GoerliETH balance in Metamask.</p>
<p align="center">
     <img src="./images/metamask-funded.png" alt="Metamask wallet funded"/>
 </p></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="get-node-provider-api-key"><a class="header" href="#get-node-provider-api-key">Get Node Provider API Key</a></h1>
<blockquote>
<p>NOTE: Node provider API key is required only for the lab exercises based on Hardhat.</p>
</blockquote>
<p>We will using <a href="https://www.alchemy.com/">Alchemy</a> as our node provider. To generate an Alchemy API key, do the following:</p>
<ol>
<li>
<p>Create a free account on <a href="https://www.alchemy.com/">Alchemy</a>.</p>
</li>
<li>
<p>Login into Alchemy.</p>
</li>
<li>
<p>Create a new app by choosing the option on the <strong>Apps</strong> dropdown menu.</p>
</li>
<li>
<p>Choose <strong>Goerli</strong> in the NETWORK dropdown of the Create App page.</p>
<p><img src="./images/alchemy-create-app.png" alt="Alchemy Create Goerli App" /></p>
</li>
<li>
<p>Click the <strong>Create app</strong> button. Your new Alchemy app should appear in the list of Apps at <a href="https://dashboard.alchemy.com/apps">https://dashboard.alchemy.com/apps</a>.</p>
</li>
<li>
<p>Click on the <strong>VIEW KEY</strong> button to get the API key.</p>
<p><img src="./images/alchemy-apps-list.png" alt="Alchemy Apps List" /></p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="remix-workflow"><a class="header" href="#remix-workflow">Remix Workflow</a></h1>
<p>Remix is an IDE for Ethereum smart contract development that can run in a browser. It is available at <a href="https://remix.ethereum.org">https://remix.ethereum.org</a>. The Remix documentation is available at <a href="https://remix-ide.readthedocs.io/">https://remix-ide.readthedocs.io/</a>.</p>
<p>The layout of the Remix IDE is described at <a href="https://remix-ide.readthedocs.io/en/latest/layout.html">https://remix-ide.readthedocs.io/en/latest/layout.html</a>. <strong>Read this page</strong>. We will be using the components described on that page in the rest of this chapter.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="compiling-a-contract"><a class="header" href="#compiling-a-contract">Compiling a Contract</a></h1>
<p>Do the following in the Remix IDE:</p>
<ol>
<li>Create a <strong>new blank workspace</strong> using the File Explorer.</li>
<li>Create a <strong>new file</strong> and name it <strong>Storage.sol</strong>.</li>
<li>Copy the below code and paste it into Storage.sol. This code is from the <a href="https://docs.soliditylang.org/en/latest/introduction-to-smart-contracts.html">Solidity tutorial</a>.
<pre><code class="language-javascript">// SPDX-License-Identifier: GPL-3.0
pragma solidity &gt;=0.4.16 &lt;0.9.0;

contract SimpleStorage {
    uint storedData;

    function set(uint x) public {
        storedData = x;
    }

    function get() public view returns (uint) {
        return storedData;
    }
}
</code></pre>
</li>
<li>Click on the <strong>Solidity compiler</strong> icon and click on the <strong>Compile Storage.sol</strong> to compile the contract.</li>
<li>Introduce a bug in Storage.sol by changing the line <code>uint storeData;</code> to <code>uint store;</code>. Click the <strong>Compile Storage.sol</strong> button again and check that errors are reported.</li>
<li>Undo the bug and continue with the next section.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deploying-a-contract"><a class="header" href="#deploying-a-contract">Deploying a Contract</a></h1>
<p>Do the following in the Remix IDE:</p>
<ol>
<li>
<p>Click on the <strong>Deploy &amp; run transactions</strong> icon.</p>
</li>
<li>
<p>In the <strong>ENVIRONMENT</strong> dropdown, choose <strong>Injected Provider - Metamask</strong>.</p>
<p><img src="remix/./../images/remix-injected-provider.png" alt="Remix Environment Setting" /></p>
</li>
<li>
<p>A Metamask window will popup asking you to select the account you wish to connect to Remix. Choose the appropriate account and click <strong>Next</strong> followed by <strong>Connect</strong>. At this point, the <strong>ACCOUNT</strong> field in Remix will be populated by your account address from Metamask.</p>
</li>
<li>
<p>Click the <strong>Deploy</strong> button. A Metamask window will popup asking you to confirm the contract deployment.</p>
<p><img src="remix/./../images/remix-deploy-metamask-dialog.png" alt="Remix Contract Deployment Metamask Popup" /></p>
</li>
<li>
<p>Click the <strong>Confirm</strong> button. After a few seconds, the contract will be deployed. You will see a notification in the Remix terminal. The contract will also appear in the <strong>Deployed Contracts</strong> list in the Remix Side Panel.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interacting-with-the-contract"><a class="header" href="#interacting-with-the-contract">Interacting with the Contract</a></h1>
<p>Do the following in the Remix IDE:</p>
<ol>
<li>
<p>Go to the <strong>Deployed Contracts</strong> section of the Remix Side Panel.</p>
</li>
<li>
<p>In the section corresponding to SimpleStorage, you should see two buttons labeled <strong>set</strong> and <strong>get</strong>.</p>
</li>
<li>
<p>Click the <strong>get</strong> button. It should return the value 0. The string <strong>uint256: 0</strong> will appear below the get button.</p>
</li>
<li>
<p>Enter an integer value (say 32) into the input box next to the <strong>set</strong> button and click it.</p>
</li>
<li>
<p>A Metamask window will popup asking you to confirm the set transaction. Click the <strong>Confirm</strong> button.</p>
<p><img src="remix/./../images/remix-simplestorage-set.png" alt="Remix Simple Storage Set Tx Metamask Popup" /></p>
</li>
<li>
<p>You will see a notification in the Remix terminal that the transaction is pending. After a few seconds, there will be another notification in the Remix terminal that the transaction was included in a block.</p>
</li>
<li>
<p>Click the <strong>get</strong> button. It should return the value 32. The string <strong>uint256: 32</strong> will appear below the get button.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hardhat-workflow"><a class="header" href="#hardhat-workflow">Hardhat Workflow</a></h1>
<p><a href="https://hardhat.org/">Hardhat</a> is a development environment for Ethereum smart contract development. It has a rich ecosystem of tools and plugins which have made it a popular choice among developers. The Hardhat documentation can be found at <a href="https://hardhat.org/docs">https://hardhat.org/docs</a>.</p>
<blockquote>
<p>NOTE: The contents on this chapter are based on the <a href="https://docs.alchemy.com/docs/hello-world-smart-contract">Hello World smart contract tutorial</a> by Alchemy.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-a-hardhat-project"><a class="header" href="#setting-up-a-hardhat-project">Setting up a Hardhat Project</a></h1>
<p>To setup a project that uses Hardhat for Ethereum contract development, do the following:</p>
<ol>
<li>Install a recent version of <a href="https://nodejs.org/en/download/">Node.js</a>. We need the <code>npm</code> and <code>npx</code> commands for the rest of this chapter.</li>
<li>Create a new directory and enter it.
<pre><code>mkdir hello-world
cd hello-world
</code></pre>
</li>
<li>Initialize a new Node.js project.
<pre><code>npm init -y
</code></pre>
The directory should contain a single file called <code>package.json</code>.</li>
<li>Install Hardhat by running the following command in the <code>hello-world</code> directory.
<pre><code>npm install --save-dev hardhat
</code></pre>
The <code>package.json</code> file will now have a <code>hardhat</code> section under <code>devDependencies</code>.</li>
<li>Create a Hardhat project by running the following command. Choose the <strong>Create an empty hardhat.config.js</strong> option.
<pre><code>npx hardhat
</code></pre>
The directory will have a file called <code>hardhat.config.js</code> with the following contents.
<pre><code class="language-javascript">/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
    solidity: &quot;0.8.17&quot;,
};
</code></pre>
The number <code>0.8.17</code> specifies the version of the Solidity compiler.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="compiling-a-contract-1"><a class="header" href="#compiling-a-contract-1">Compiling a Contract</a></h1>
<p>To add a contract and compile it using Hardhat, do the following:</p>
<ol>
<li>
<p>In the project directory, create a <code>contracts</code> directory.</p>
<pre><code>mkdir contracts
</code></pre>
</li>
<li>
<p>Create a new file in the <code>contracts</code> directory called <code>HelloWorld.sol</code>.</p>
</li>
<li>
<p>Copy and paste the following code into <code>HelloWorld.sol</code>.</p>
<pre><code class="language-javascript">// SPDX-License-Identifier: MIT
pragma solidity &gt;=0.7.3;

// Defines a contract named `HelloWorld`.
contract HelloWorld {

    // Event emitted when update function is called
    event UpdatedMessages(string oldStr, string newStr);

    // Declares a state variable `message` of type `string`.
    string public message;

    // A constructor is a special function that is only executed upon contract creation.
    constructor(string memory initMessage) {
        message = initMessage;
    }

    // A public function that accepts a string argument and updates the `message` storage variable.
    function update(string memory newMessage) public {
        string memory oldMsg = message;
        message = newMessage;
        emit UpdatedMessages(oldMsg, newMessage);
    }
}
</code></pre>
</li>
<li>
<p>Compile the contract by running the following command.</p>
<pre><code>npx hardhat compile
</code></pre>
<p>You should see a message saying <code>Compiled 1 Solidity file successfully.</code></p>
<p>The command also creates a directory called <code>artifacts</code> that has some JSON files. The <code>HelloWorld.json</code> has the contract's code and <strong>application binary interface (ABI)</strong>. These will be used for contract deployment and interaction.</p>
<p><img src="hardhat/./../images/hardhat-compile-artifacts.png" alt="Hardhat Compile Artifacts" /></p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deploying-a-contract-1"><a class="header" href="#deploying-a-contract-1">Deploying a Contract</a></h1>
<p>To deploy the <code>HelloWorld.sol</code> contract, do the following:</p>
<ol>
<li>
<p>Install the dotenv package in your project directory.</p>
<pre><code>npm install dotenv --save
</code></pre>
</li>
<li>
<p>Create a file called <code>.env</code> in the project directory with the following contents.</p>
<pre><code>API_URL = &quot;https://eth-goerli.g.alchemy.com/v2/your-api-key&quot;
PRIVATE_KEY = &quot;your-metamask-private-key&quot;
</code></pre>
<p>Follow <a href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key">these instructions</a> to export your private key from Metamask. The <code>API_URL</code> needs to be copied from your Alchemy account.</p>
<blockquote>
<p>NOTE: If you are going to push the project code to a public Github/Gitlab repository, remember to add the <code>.env</code> file to your <code>.gitignore</code>.</p>
</blockquote>
</li>
<li>
<p>Install Ethers.js by running the following command</p>
<pre><code>npm install --save-dev @nomiclabs/hardhat-ethers &quot;ethers@^5.0.0&quot;
</code></pre>
</li>
<li>
<p>Update the <code>hardhat.config.js</code> file to have the following content.</p>
<pre><code class="language-javascript">/**
* @type import('hardhat/config').HardhatUserConfig
*/

require('dotenv').config();
require(&quot;@nomiclabs/hardhat-ethers&quot;);

const { API_URL, PRIVATE_KEY } = process.env;

module.exports = {
solidity: &quot;0.8.17&quot;,
defaultNetwork: &quot;goerli&quot;,
networks: {
    hardhat: {},
    goerli: {
        url: API_URL,
        accounts: [`0x${PRIVATE_KEY}`]
    }
},
}
</code></pre>
</li>
<li>
<p>Create a directory called <code>scripts</code></p>
<pre><code>mkdir scripts
</code></pre>
</li>
<li>
<p>Create a file called <code>deploy.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">async function main() {
    const HelloWorld = await ethers.getContractFactory(&quot;HelloWorld&quot;);

    // Start deployment, returning a promise that resolves to a contract object
    const hello_world = await HelloWorld.deploy(&quot;Hello World!&quot;);   
    console.log(&quot;Contract deployed to address:&quot;, hello_world.address);
}

main()
.then(() =&gt; process.exit(0))
.catch(error =&gt; {
    console.error(error);
    process.exit(1);
});
</code></pre>
</li>
<li>
<p>Deploy the contract by running the following command.</p>
<pre><code>npx hardhat run scripts/deploy.js --network goerli
</code></pre>
<p>You should see a message of the following form. The address will be different in your case.</p>
<pre><code>Contract deployed to address: 0xD1aEf927a80301b63dE477afe2410F25bf8Baf6a
</code></pre>
<p>Save the contract address somewhere. It will be used in the next section.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interacting-with-the-contract-1"><a class="header" href="#interacting-with-the-contract-1">Interacting with the Contract</a></h1>
<p>In this section, we will interact with the <code>HelloWorld</code> contract that deployed in the previous section. Do the following:</p>
<ol>
<li>
<p>Add <code>API_KEY</code> and <code>CONTRACT_ADDRESS</code> variables to the <code>.env</code> file. Your <code>.env</code> file should look like the following:</p>
<pre><code>API_URL = &quot;https://eth-goerli.g.alchemy.com/v2/&lt;your-api-key&gt;&quot;
API_KEY = &quot;&lt;your-api-key&gt;&quot;
PRIVATE_KEY = &quot;&lt;your-metamask-private-key&gt;&quot;
CONTRACT_ADDRESS = &quot;0x&lt;your contract address&gt;&quot;
</code></pre>
<p>Note that the <code>API_KEY</code> is the string at the end of your <code>API_URL</code>. The <code>CONTRACT_ADDRESS</code> is the address that was output at the end of the deployment workflow in the previous section.</p>
</li>
<li>
<p>Create a file called <code>interact.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">const API_KEY = process.env.API_KEY;
const PRIVATE_KEY = process.env.PRIVATE_KEY;
const CONTRACT_ADDRESS = process.env.CONTRACT_ADDRESS;

const contract = require(&quot;../artifacts/contracts/HelloWorld.sol/HelloWorld.json&quot;);

// provider - Alchemy
const alchemyProvider = new ethers.providers.AlchemyProvider(network=&quot;goerli&quot;, API_KEY);

// signer - your account
const signer = new ethers.Wallet(PRIVATE_KEY, alchemyProvider);

// contract instance
const helloWorldContract = new ethers.Contract(CONTRACT_ADDRESS, contract.abi, signer);

async function main() {
    const message = await helloWorldContract.message();
    console.log(&quot;The message is: &quot; + message); 

    console.log(&quot;Updating the message...&quot;);
    const tx = await helloWorldContract.update(&quot;Hello Again World!&quot;);
    await tx.wait();

    const newMessage = await helloWorldContract.message();
    console.log(&quot;The new message is: &quot; + newMessage); 
}

main();
</code></pre>
</li>
<li>
<p>Run the following command to update the message in the <code>HelloWorld</code> contract.</p>
<pre><code>npx hardhat run scripts/interact.js --network goerli
</code></pre>
<p>You should see the following output after about half a minute. The delay is because the script waits for the transaction included in a new block in the Goerli testnet.</p>
<pre><code>The message is: Hello World!
Updating the message...
The new message is: Hello Again World!
</code></pre>
</li>
<li>
<p>The <code>interact.js</code> script above requires you to enter the message in the script itself. It would be nice if we could specify the message on the command line. This can be done by using Hardhat as a library in a standalone Node.js script. Create a new file called <code>interact-cli.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">const hre = require(&quot;hardhat&quot;);
const API_KEY = process.env.API_KEY;
const PRIVATE_KEY = process.env.PRIVATE_KEY;
const CONTRACT_ADDRESS = process.env.CONTRACT_ADDRESS;

const contract = require(&quot;../artifacts/contracts/HelloWorld.sol/HelloWorld.json&quot;);

// provider - Alchemy
const alchemyProvider = new hre.ethers.providers.AlchemyProvider(network=&quot;goerli&quot;, API_KEY);

// signer - your account
const signer = new hre.ethers.Wallet(PRIVATE_KEY, alchemyProvider);

// contract instance
const helloWorldContract = new hre.ethers.Contract(CONTRACT_ADDRESS, contract.abi, signer);

async function main() {
    await hre.run(&quot;compile&quot;);

    const args = process.argv;
    if (args.length != 3) {
        console.log(&quot;Provide a message argument (in single quotes)&quot;)
        process.exit(0);
    }
    const new_message_arg = args[2];

    const message = await helloWorldContract.message();
    console.log(&quot;The message is: &quot; + message); 

    console.log(&quot;Updating the message...&quot;);
    const tx = await helloWorldContract.update(new_message_arg);
    await tx.wait();

    const newMessage = await helloWorldContract.message();
    console.log(&quot;The new message is: &quot; + newMessage);
}

main().catch((error) =&gt; {
    console.error(error);
    process.exitCode = 1;
});
</code></pre>
</li>
<li>
<p>Run the following command to update the message stored in the <code>HelloWorld</code> contract from the command line. Note the single quotes surrounding the new message.</p>
<pre><code>node scripts/interact-cli.js 'Hello World 3!'
</code></pre>
<p>You should see the following output:</p>
<pre><code>Nothing to compile
The message is: Hello World Again!
Updating the message...
The new message is: Hello World 3!
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc-20-token"><a class="header" href="#erc-20-token">ERC-20 Token</a></h1>
<p>The <a href="https://ethereum.org/en/developers/docs/standards/tokens/erc-20/">ERC-20 token standard</a> is a specification for <strong>fungible tokens</strong> on Ethereum. A token is said to be fungible if one unit of the token can be replaced with any other unit.</p>
<p>For example, a 10 rupee note is fungible in the sense it can be exchanged for any other 10 rupee note. Ether is itself a fungible token. Each unit of a non-fungible token (NFTs) has a unique identifier and cannot be exchanged for another unit.</p>
<blockquote>
<p>NOTE: The ERC in ERC-20 stands for <strong>Ethereum Request for Comments</strong>. They are Ethereum's analog of <a href="https://www.ietf.org/standards/rfcs/">Request for Comments (RFCs)</a>, that are used to specify Internet standards. When the Github issue to discuss the fungible token standard was created in the <a href="https://github.com/ethereum/EIPs">Ethereum Improvement Proposals repository</a>, it was assigned <a href="https://github.com/ethereum/EIPs/issues/20">issue number 20</a>. Hence the name ERC-20.</p>
</blockquote>
<p>The full ERC-20 token specification can be found in <a href="https://eips.ethereum.org/EIPS/eip-20">Ethereum Improvement Proposal 20 (EIP-20)</a>.</p>
<p>In this chapter, you will be deploying your own ERC-20 token on Goerli testnet.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-the-erc-20-project"><a class="header" href="#setting-up-the-erc-20-project">Setting up the ERC-20 Project</a></h1>
<p>To setup a project that uses Hardhat for ERC-20 contract development, do the following:</p>
<ol>
<li>
<p>Create a new directory and enter it.</p>
<pre><code>mkdir my-token
cd my-token
</code></pre>
</li>
<li>
<p>Initialize a new Node.js project.</p>
<pre><code>npm init -y
</code></pre>
<p>The directory should contain a single file called <code>package.json</code>.</p>
</li>
<li>
<p>Install Hardhat by running the following command in the <code>my-token</code> directory.</p>
<pre><code>npm install --save-dev hardhat
</code></pre>
<p>The <code>package.json</code> file will now have a <code>hardhat</code> section under <code>devDependencies</code>.</p>
</li>
<li>
<p>Create a Hardhat project by running the following command. Choose the <strong>Create an empty hardhat.config.js</strong> option.</p>
<pre><code>npx hardhat
</code></pre>
<p>The directory will have a file called <code>hardhat.config.js</code> with the following contents.</p>
<pre><code class="language-javascript">/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
    solidity: &quot;0.8.17&quot;,
};
</code></pre>
<p>The number <code>0.8.17</code> specifies the version of the Solidity compiler.</p>
</li>
<li>
<p>Install the dotenv package in your project directory.</p>
<pre><code>npm install dotenv --save
</code></pre>
</li>
<li>
<p>Create a file called <code>.env</code> in the project directory with the following contents.</p>
<pre><code>API_URL = &quot;https://eth-goerli.g.alchemy.com/v2/your-api-key&quot;
PRIVATE_KEY = &quot;your-metamask-private-key&quot;
</code></pre>
<p>Follow <a href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key">these instructions</a> to export your private key from Metamask. The <code>API_URL</code> needs to be copied from your Alchemy account.</p>
<blockquote>
<p>NOTE: If you are going to push the project code to a public Github/Gitlab repository, remember to add the <code>.env</code> file to your <code>.gitignore</code>.</p>
</blockquote>
</li>
<li>
<p>Install Ethers.js by running the following command</p>
<pre><code>npm install --save-dev @nomiclabs/hardhat-ethers &quot;ethers@^5.0.0&quot;
</code></pre>
</li>
<li>
<p>Update the <code>hardhat.config.js</code> file to have the following content.</p>
<pre><code class="language-javascript">/**
* @type import('hardhat/config').HardhatUserConfig
*/

require('dotenv').config();
require(&quot;@nomiclabs/hardhat-ethers&quot;);

const { API_URL, PRIVATE_KEY } = process.env;

module.exports = {
solidity: &quot;0.8.17&quot;,
defaultNetwork: &quot;goerli&quot;,
networks: {
    hardhat: {},
    goerli: {
        url: API_URL,
        accounts: [`0x${PRIVATE_KEY}`]
    }
},
}
</code></pre>
</li>
<li>
<p>Your ERC-20 token will be based on the implementation by <a href="https://www.openzeppelin.com/">OpenZeppelin</a>. Install the Node.js package containing OpenZeppelin's contracts by running the following command in the project directory.</p>
<pre><code>npm install @openzeppelin/contracts
</code></pre>
<p>The installed contracts can be found in the <code>node_modules</code> directory in your project directory. The path will be  <code>node_modules/@openzeppelin/contracts/</code>. We will be inheriting the ERC-20 implementation at <code>node_modules/@openzeppelin/contracts/token/ERC20/ERC20.sol</code>.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deploying-the-contract"><a class="header" href="#deploying-the-contract">Deploying the Contract</a></h1>
<p>To deploy your ERC-20 token, do the following:</p>
<ol>
<li>
<p>In the project directory, create a <code>contracts</code> directory.</p>
<pre><code>mkdir contracts
</code></pre>
</li>
<li>
<p>Create a new file in the <code>contracts</code> directory called <code>MyToken.sol</code>.</p>
</li>
<li>
<p>Copy and paste the following code into <code>MyToken.sol</code>.</p>
<pre><code class="language-javascript">//SPDX-License-Identifier: Unlicense
pragma solidity ^0.8.0;

import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;

contract WinterSchoolToken is ERC20 {
    uint constant _initial_supply = 100 * (10**18);

    /* ERC 20 constructor takes in two strings:
     1. The name of your token name
     2. A symbol for your token
    */
    constructor() ERC20(&quot;Winter School Token&quot;, &quot;WST&quot;) {
        _mint(msg.sender, _initial_supply);
    }
}
</code></pre>
</li>
<li>
<p>Compile the contract by running the following command.</p>
<pre><code>npx hardhat compile
</code></pre>
<p>You should see a message saying <code>Compiled 1 Solidity file successfully.</code></p>
</li>
<li>
<p>Create a directory called <code>scripts</code></p>
<pre><code>mkdir scripts
</code></pre>
</li>
<li>
<p>Create a file called <code>deploy.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">async function main() {
    const MyToken = await ethers.getContractFactory(&quot;WinterSchoolToken&quot;);

    // Start deployment, returning a promise that resolves to a contract object
    const my_token = await MyToken.deploy();   
    console.log(&quot;ERC-20 contract deployed to address:&quot;, my_token.address);
}

main()
.then(() =&gt; process.exit(0))
.catch(error =&gt; {
    console.error(error);
    process.exit(1);
});
</code></pre>
</li>
<li>
<p>Deploy the contract by running the following command.</p>
<pre><code>npx hardhat run scripts/deploy.js --network goerli
</code></pre>
<p>You should see a message of the following form. The address will be different in your case.</p>
<pre><code>ERC-20 contract deployed to address: 0xbb8Ab9564596Ccbfe0C6eD49D7FdB056eE741CE5
</code></pre>
</li>
<li>
<p>Go to <a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/token/[Your Token Address]</a> to see the token details. Notice that you have to enter the address of the newly created token in the URL.</p>
</li>
</ol>
<h2 id="customize-and-launch-your-token-optional"><a class="header" href="#customize-and-launch-your-token-optional">Customize and Launch Your Token (optional)</a></h2>
<ol>
<li>
<p>The Winter School Token launched in the previous section has three characteristics that can be customized.</p>
<ul>
<li><strong>Token name:</strong> Winter School Token</li>
<li><strong>Token symbol:</strong> WST</li>
<li><strong>Initial supply:</strong> 100 WST</li>
</ul>
<blockquote>
<p><strong>Note:</strong> The <code>_initial_supply</code> variable in <code>MyToken.sol</code> is set to <code>100 * (10**18)</code> which equals \(100 \times 10^{18}\). This corresponds to 100 WST tokens because the default value for the number of decimals in OpenZeppelin's ERC20 implementation is 18. This is the same with Ether where 1 ETH = \(10^{18}\) wei.</p>
</blockquote>
</li>
<li>
<p>*<em>Customize your token</em> by changing the values in the constructor arguments and the initial supply. The following lines in <code>MyToken.sol</code> need to be changed.</p>
<pre><code class="language-javascript">uint constant _initial_supply = ...;
...
constructor() ERC20(&quot;Winter School Token&quot;, &quot;WST&quot;) {
</code></pre>
</li>
<li>
<p>Run the following commands to lauch your customized token contract.</p>
<pre><code>npx hardhat compile
npx hardhat run scripts/deploy.js --network goerli
</code></pre>
<blockquote>
<p><strong>Note:</strong> If you change the name of the contract from <code>WinterSchoolToken</code> to something else, remember to enter the new name as the argument to the <code>ethers.getContractFactory</code> in <code>scripts/deploy.js</code>.</p>
</blockquote>
</li>
<li>
<p>Go to <a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/token/[Your Token Address]</a> to see the token details. </p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transfer-tokens-using-metamask"><a class="header" href="#transfer-tokens-using-metamask">Transfer Tokens using Metamask</a></h1>
<ol>
<li>
<p>To transfer the newly created token using Metamask, you have to import it into Metamask. Click the <strong>Import tokens</strong> link in Metamask.</p>
<p align="center">
     <img src="erc20/./../images/erc20-import-token-link.png" alt="Metamask Import Token Link"/>
 </p>
</li>
<li>
<p>Enter your token contract address in the textbox labeled <strong>Token contract address</strong>. When you move to the next input box, the <strong>Token symbol</strong> and <strong>Token decimal</strong> fields get automatically populated by Metamask. Click on <strong>Add custom token</strong>.</p>
<p align="center">
     <img src="erc20/./../images/erc20-import-token-dialog.png" alt="Metamask Import Tokens Dialog"/>
 </p>
</li>
<li>
<p>The new token's balance should appear in Metamask.</p>
<p align="center">
     <img src="erc20/./../images/erc20-token-display-in-metamask.png" alt="Metamask Tokens Display"/>
 </p>
</li>
<li>
<p>To transfer the new tokens, we need a recipient address. Create a new account in Metamask by clicking <strong>Create account</strong> in the account menu.</p>
<p align="center">
     <img src="erc20/./../images/erc20-metamask-create-account.png" alt="Metamask Tokens Display"/>
 </p>
</li>
<li>
<p>Let the name of the new account be <strong>Account 2</strong>. Copy the address of Account 2.</p>
</li>
<li>
<p>Switch back to <strong>Account 1</strong>. Click on the token's account balance to reveal the tranfer screen.</p>
</li>
<li>
<p>Click on <strong>Send</strong> and paste Account 2's address. Specify an amount of tokens to transfer. You will have to click on <strong>Confirm</strong> to send the transfer transaction.</p>
</li>
<li>
<p>You will have to import the token in Account 2 to see its balance (the same as step 1).</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc-721-tokens-aka-non-fungible-tokens"><a class="header" href="#erc-721-tokens-aka-non-fungible-tokens">ERC-721 Tokens aka Non-Fungible Tokens</a></h1>
<p>The <a href="https://ethereum.org/en/developers/docs/standards/tokens/erc-721/">ERC-721 token standard</a> is a specification for <strong>non-fungible tokens (NFTs)</strong> on Ethereum. A token is said to be non-fungible if each unit of the token has a unique identifier and cannot be exchanged for another unit.</p>
<blockquote>
<p>NOTE: The ERC in ERC-721 stands for <strong>Ethereum Request for Comments</strong>. They are Ethereum's analog of <a href="https://www.ietf.org/standards/rfcs/">Request for Comments (RFCs)</a>, that are used to specify Internet standards. When the Github issue to discuss the non-fungible token standard was created in the <a href="https://github.com/ethereum/EIPs">Ethereum Improvement Proposals repository</a>, it was assigned <a href="https://github.com/ethereum/EIPs/issues/721">issue number 721</a>. Hence the name ERC-721.</p>
</blockquote>
<p>The full ERC-721 token specification can be found in <a href="https://eips.ethereum.org/EIPS/eip-721">Ethereum Improvement Proposal 721 (EIP-721)</a>.</p>
<p>In this chapter, you will be deploying your own NFT on Goerli testnet.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-the-erc-721-project"><a class="header" href="#setting-up-the-erc-721-project">Setting up the ERC-721 Project</a></h1>
<p>To setup a project that uses Hardhat for ERC-721 contract development, do the following:</p>
<ol>
<li>
<p>Create a new directory and enter it.</p>
<pre><code>mkdir my-nft
cd my-nft
</code></pre>
</li>
<li>
<p>Initialize a new Node.js project.</p>
<pre><code>npm init -y
</code></pre>
<p>The directory should contain a single file called <code>package.json</code>.</p>
</li>
<li>
<p>Install Hardhat by running the following command in the <code>my-nft</code> directory.</p>
<pre><code>npm install --save-dev hardhat
</code></pre>
<p>The <code>package.json</code> file will now have a <code>hardhat</code> section under <code>devDependencies</code>.</p>
</li>
<li>
<p>Create a Hardhat project by running the following command. Choose the <strong>Create an empty hardhat.config.js</strong> option.</p>
<pre><code>npx hardhat
</code></pre>
<p>The directory will have a file called <code>hardhat.config.js</code> with the following contents.</p>
<pre><code class="language-javascript">/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
    solidity: &quot;0.8.17&quot;,
};
</code></pre>
<p>The number <code>0.8.17</code> specifies the version of the Solidity compiler.</p>
</li>
<li>
<p>Install the dotenv package in your project directory.</p>
<pre><code>npm install dotenv --save
</code></pre>
</li>
<li>
<p>Create a file called <code>.env</code> in the project directory with the following contents.</p>
<pre><code>API_URL = &quot;https://eth-goerli.g.alchemy.com/v2/your-api-key&quot;
API_KEY = &quot;your-api-key&quot;
PRIVATE_KEY = &quot;your-metamask-private-key&quot;
</code></pre>
<p>Follow <a href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key">these instructions</a> to export your private key from Metamask. The <code>API_URL</code> and <code>API_KEY</code> values need to be copied from your Alchemy account.</p>
<blockquote>
<p>NOTE: If you are going to push the project code to a public Github/Gitlab repository, remember to add the <code>.env</code> file to your <code>.gitignore</code>.</p>
</blockquote>
</li>
<li>
<p>Install Ethers.js by running the following command</p>
<pre><code>npm install --save-dev @nomiclabs/hardhat-ethers &quot;ethers@^5.0.0&quot;
</code></pre>
</li>
<li>
<p>Update the <code>hardhat.config.js</code> file to have the following content.</p>
<pre><code class="language-javascript">/**
* @type import('hardhat/config').HardhatUserConfig
*/

require('dotenv').config();
require(&quot;@nomiclabs/hardhat-ethers&quot;);

const { API_URL, PRIVATE_KEY } = process.env;

module.exports = {
solidity: &quot;0.8.17&quot;,
defaultNetwork: &quot;goerli&quot;,
networks: {
    hardhat: {},
    goerli: {
        url: API_URL,
        accounts: [`0x${PRIVATE_KEY}`]
    }
},
}
</code></pre>
</li>
<li>
<p>Your ERC-721 token will be based on the implementation by <a href="https://www.openzeppelin.com/">OpenZeppelin</a>. Install the Node.js package containing OpenZeppelin's contracts by running the following command in the project directory.</p>
<pre><code>npm install @openzeppelin/contracts
</code></pre>
<p>The installed contracts can be found in the <code>node_modules</code> directory in your project directory. The path will be  <code>node_modules/@openzeppelin/contracts/</code>. We will be inheriting the ERC-20 implementation at <code>node_modules/@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol</code>.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deploying-the-nft-erc-721-contract"><a class="header" href="#deploying-the-nft-erc-721-contract">Deploying the NFT (ERC-721) Contract</a></h1>
<p>To deploy your ERC-721 token, do the following:</p>
<ol>
<li>
<p>In the project directory, create a <code>contracts</code> directory.</p>
<pre><code>mkdir contracts
</code></pre>
</li>
<li>
<p>Create a new file in the <code>contracts</code> directory called <code>MyNFT.sol</code>.</p>
</li>
<li>
<p>Copy and paste the following code into <code>MyNFT.sol</code>.</p>
<pre><code class="language-javascript">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.17;

import &quot;@openzeppelin/contracts/token/ERC721/extensions/ERC721URIStorage.sol&quot;;
import &quot;@openzeppelin/contracts/utils/Counters.sol&quot;;
import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;

contract WinterSchoolNFT is ERC721URIStorage, Ownable {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;

    constructor() ERC721(&quot;Winter School NFT&quot;, &quot;WSNFT&quot;) {}

    function mintNFT(address recipient, string memory tokenURI)
        public
        onlyOwner
        returns (uint256)
    {
        _tokenIds.increment();

        uint256 newItemId = _tokenIds.current();
        _mint(recipient, newItemId);
        _setTokenURI(newItemId, tokenURI);

        return newItemId;
    }
}
</code></pre>
</li>
<li>
<p>Compile the contract by running the following command.</p>
<pre><code>npx hardhat compile
</code></pre>
<p>You should see a message saying <code>Compiled 1 Solidity file successfully.</code></p>
</li>
<li>
<p>Create a directory called <code>scripts</code></p>
<pre><code>mkdir scripts
</code></pre>
</li>
<li>
<p>Create a file called <code>deploy.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">async function main() {
    // Grab the contract factory 
    const MyNFT = await ethers.getContractFactory(&quot;WinterSchoolNFT&quot;);

    // Start deployment, returning a promise that resolves to a contract object
    const myNFT = await MyNFT.deploy(); // Instance of the contract 
    console.log(&quot;ERC-721 contract deployed to address:&quot;, myNFT.address);
}

main()
.then(() =&gt; process.exit(0))
.catch(error =&gt; {
    console.error(error);
    process.exit(1);
});
</code></pre>
</li>
<li>
<p>Deploy the contract by running the following command.</p>
<pre><code>npx hardhat run scripts/deploy.js --network goerli
</code></pre>
<p>You should see a message of the following form. The address will be different in your case.</p>
<pre><code>ERC-721 contract deployed to address: 0x6898E26AD18e2DeA803E578a1F29C0f86bF3276a
</code></pre>
</li>
<li>
<p><strong>IMPORTANT</strong>: Create a variable called <code>CONTRACT_ADDRESS</code> in your <code>.env</code> file with value equal to your deployed contract address. Your <code>.env</code> file should look like this.</p>
<pre><code>API_URL = &quot;https://eth-goerli.g.alchemy.com/v2/your-api-key&quot;
API_KEY = &quot;your-api-key&quot;
PRIVATE_KEY = &quot;your-metamask-private-key&quot;
CONTRACT_ADDRESS = &quot;your-deployed-contract-address&quot;
</code></pre>
</li>
<li>
<p>Go to <a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/token/[Your Token Address]</a> to see the token details. Notice that you have to enter the address of the newly created token in the URL.</p>
</li>
</ol>
<h2 id="customize-and-launch-your-token-optional-1"><a class="header" href="#customize-and-launch-your-token-optional-1">Customize and Launch Your Token (optional)</a></h2>
<ol>
<li>
<p>The Winter School NFT launched in the previous section has two characteristics that can be customized.</p>
<ul>
<li><strong>NFT Collection name:</strong> Winter School NFT</li>
<li><strong>NFT Collection symbol:</strong> WSNST</li>
</ul>
</li>
<li>
<p>*<em>Customize your NFT</em> by changing the values in the constructor arguments. The following line in <code>MyNFT.sol</code> needs to be changed.</p>
<pre><code class="language-javascript">constructor() ERC721(&quot;Winter School NFT&quot;, &quot;WSNFT&quot;) {}
</code></pre>
</li>
<li>
<p>Run the following commands to lauch your customized token contract.</p>
<pre><code>npx hardhat compile
npx hardhat run scripts/deploy.js --network goerli
</code></pre>
<blockquote>
<p><strong>Note:</strong> If you change the name of the contract from <code>WinterSchoolNFT</code> to something else, remember to enter the new name as the argument to the <code>ethers.getContractFactory</code> in <code>scripts/deploy.js</code>.</p>
</blockquote>
</li>
<li>
<p>Go to <a href="https://goerli.etherscan.io/">https://goerli.etherscan.io/token/[Your Token Address]</a> to see the token details. </p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="minting-an-nft"><a class="header" href="#minting-an-nft">Minting an NFT</a></h1>
<p>To mint an NFT, do the following:</p>
<ol>
<li>
<p>Choose an image for your NFT. We will use the following image:</p>
<p align="center">
     <img src="erc721/./../images/wsnft-0.png" alt="Winter School NFT #0"/>
 </p>
</li>
<li>
<p>Create a free account in <a href="https://www.pinata.cloud/">Pinata</a> and <strong>upload your image</strong> there.</p>
<blockquote>
<p><strong>Note:</strong> We will need to specify an <strong>image location</strong> when we mint our NFT. This image will be displayed by NFT explorer websites like <a href="https://opensea.io/">OpenSea</a>. While we could upload an image to a regular website and use that URL, the image will become inaccessible if the website goes down. Or someone could change the image located at that URL leading to undesirable effects. <br />
The convention in the NFT community is to upload the image to the <a href="https://ipfs.tech/">Inter Planetary File System (IPFS)</a>. IPFS is a peer-to-peer network for storing files. IPFS using <strong>content addressing</strong> to identify files. This means that a cryptographic hash of a file's contents identify the file. Such file identifiers are called <strong>Content Identifiers (CIDs)</strong>.</p>
</blockquote>
</li>
<li>
<p><strong>Copy your image's CID</strong>. It will look like <code>QmcssgBH1SeDTmmEw2N6JqzTzfNebo5tCLbzuk3gxfiuk6</code>. For example, the image we will be using is available on the Pinata interface at <a href="https://gateway.pinata.cloud/ipfs/QmcssgBH1SeDTmmEw2N6JqzTzfNebo5tCLbzuk3gxfiuk6">https://gateway.pinata.cloud/ipfs/QmcssgBH1SeDTmmEw2N6JqzTzfNebo5tCLbzuk3gxfiuk6</a>. The CID corresponds to the alphanumeric string starting with <code>Qm...</code>.</p>
</li>
<li>
<p><strong>Create a NFT metadata JSON file</strong> in the following format. In the value corresponding to the <code>image</code> key, <strong>enter the CID of your image</strong> after the <code>ipfs://</code>. You can also enter other values for the <code>name</code>, <code>description</code>, and <code>external_url</code> keys. </p>
<pre><code>{
    &quot;name&quot;: &quot;ACM Winter School Attendee #0&quot;,
    &quot;description&quot;: &quot;NFT given to an attendee of the 2022 ACM Winter School on Topics in Digital Trust, organized by Trust Lab, IIT Bombay&quot;,
    &quot;external_url&quot;: &quot;https://trustlab.iitb.ac.in/event/winter-school-2022&quot;,
    &quot;image&quot;: &quot;ipfs://QmcssgBH1SeDTmmEw2N6JqzTzfNebo5tCLbzuk3gxfiuk6&quot;
}
</code></pre>
</li>
<li>
<p><strong>Upload the metadata JSON file</strong> to Pinata and get its CID. For example, the above file is at location <a href="https://gateway.pinata.cloud/ipfs/QmfHMf1Qe5o9TRW1HgSoGqcFNosKLmBprbvH4T3SM3w5Hy">https://gateway.pinata.cloud/ipfs/QmfHMf1Qe5o9TRW1HgSoGqcFNosKLmBprbvH4T3SM3w5Hy</a>. The CID corresponds to <code>QmfHMf1Qe5o9TRW1HgSoGqcFNosKLmBprbvH4T3SM3w5Hy</code>.</p>
</li>
<li>
<p>Create a file called <code>mint-nft.js</code> in the <code>scripts</code> directory with the following content.</p>
<pre><code class="language-javascript">const hre = require(&quot;hardhat&quot;);
const API_KEY = process.env.API_KEY;
const privateKey = process.env.PRIVATE_KEY;
const contractAddress = process.env.CONTRACT_ADDRESS;


// Define an Alchemy Provider
const provider = new hre.ethers.providers.AlchemyProvider('goerli', API_KEY)

// Get contract ABI file
const contract = require(&quot;../artifacts/contracts/MyNFT.sol/WinterSchoolNFT.json&quot;);

// Create a signer
const signer = new hre.ethers.Wallet(privateKey, provider)

// Get contract ABI and address
const abi = contract.abi

// Create a contract instance
const myNftContract = new hre.ethers.Contract(contractAddress, abi, signer)

async function main() {
    const args = process.argv;
    if (args.length != 3) {
        console.log(&quot;Provide an IPFS hash of the NFT metadata as an argument&quot;)
        process.exit(0);
    }
    const ipfsHash = args[2];
    const tokenUri = &quot;ipfs://&quot; + ipfsHash;

    console.log(&quot;Minting NFT...&quot;);
    let nftTxn = await myNftContract.mintNFT(signer.address, tokenUri)
    await nftTxn.wait()
    console.log(`NFT Minted! Check it out at: https://goerli.etherscan.io/tx/${nftTxn.hash}`)
}
    
main().catch((error) =&gt; {
    console.error(error);
    process.exitCode = 1;
});
</code></pre>
</li>
<li>
<p>Run the following command with the <code>&lt;metadata-ipfs-hash&gt;</code> value replaced with your metadata file's CID. <strong>Don't use the image CID</strong>.</p>
<pre><code>node scripts/mint-nft.js &lt;metadata-ipfs-hash&gt;
</code></pre>
<p>After about a half a minute, you should see a message saying</p>
<pre><code>NFT Minted! Check it out at: https://goerli.etherscan.io/tx/0xa9da090c5de3eb59e649cc04dd362bd4d09f454c8a37197d107f1603e4c910f5
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="viewing-the-nfts-on-opensea"><a class="header" href="#viewing-the-nfts-on-opensea">Viewing the NFTs on OpenSea</a></h1>
<p>To see your NFT collection on OpenSea, do the following:</p>
<ol>
<li>Go to <a href="https://testnets.opensea.io/">https://testnets.opensea.io/</a> </li>
<li>Enter your <strong>contract address</strong> in the search bar.</li>
<li>Your NFT collection should show up. For example, the NFT collection created in this guide is available <a href="https://testnets.opensea.io/collection/winter-school-nft-v3">here</a>.</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </body>
</html>
